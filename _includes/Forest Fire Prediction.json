{"paragraphs":[{"text":"%md # Forest Fire Prediction through KMeans Clustering\n<img src=\"https://surveymonkey-assets.s3.amazonaws.com/survey/121135814/6a48257c-8996-4aa6-ba56-6b1e373385c3.png\" width=100 hspace=\"20\" style=\"float: right;\">\nThe United States Forest Service provides datasets that describe forest fires that have occurred in Canada and the United States since year 2000. We can  predict where forest fires are prone to occur by partitioning the locations of past burns into clusters whose centroids can be used to optimally place heavy fire fighting equipment as near as possible to where fires are likely to occur.\n\nDataset:\nhttps://fsapps.nwcg.gov/gisdata.php\n","user":"anonymous","dateUpdated":"2017-10-25T15:23:14+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Forest Fire Prediction through KMeans Clustering</h1>\n<img src=\"https://surveymonkey-assets.s3.amazonaws.com/survey/121135814/6a48257c-8996-4aa6-ba56-6b1e373385c3.png\" width=100 hspace=\"20\" style=\"float: right;\">\n<p>The United States Forest Service provides datasets that describe forest fires that have occurred in Canada and the United States since year 2000. We can predict where forest fires are prone to occur by partitioning the locations of past burns into clusters whose centroids can be used to optimally place heavy fire fighting equipment as near as possible to where fires are likely to occur.</p>\n<p>Dataset:<br/><a href=\"https://fsapps.nwcg.gov/gisdata.php\">https://fsapps.nwcg.gov/gisdata.php</a></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1508822183588_673811793","id":"20171024-051623_427668146","dateCreated":"2017-10-24T05:16:23+0000","dateStarted":"2017-10-25T15:23:14+0000","dateFinished":"2017-10-25T15:23:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:7992"},{"title":"Download Raw Data ","text":"%sh\nmkdir -p /mapr/my.cluster.com/user/mapr/data/fires\ncd /mapr/my.cluster.com/user/mapr/data/fires\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2016_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2015_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2014_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2013_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2012_366_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2011_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2010_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/modis_fire_2009_365_conus_shapefile.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2008_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2007_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2006_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2005_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2004_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2003_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2002_005_01_conus_shp.zip\ncurl -s --remote-name https://fsapps.nwcg.gov/afm/data/fireptdata/mcd14ml_2001_005_01_conus_shp.zip\nfind modis*.zip | xargs -I {} unzip {} modis*.dbf\nfind mcd*.zip | xargs -I {} unzip {} mcd*.dbf","user":"anonymous","dateUpdated":"2017-10-25T22:10:33+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false},"editorMode":"ace/mode/sh","editorHide":false,"tableHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"Archive:  modis_fire_2009_365_conus_shapefile.zip\nreplace modis_fire_2009_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2010_365_conus_shapefile.zip\nreplace modis_fire_2010_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2011_365_conus_shapefile.zip\nreplace modis_fire_2011_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2012_366_conus_shapefile.zip\nreplace modis_fire_2012_366_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2013_365_conus_shapefile.zip\nreplace modis_fire_2013_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2014_365_conus_shapefile.zip\nreplace modis_fire_2014_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2015_365_conus_shapefile.zip\nreplace modis_fire_2015_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2016_365_conus.dbf\nArchive:  modis_fire_2016_365_conus_shapefile.zip\nreplace modis_fire_2016_365_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  modis_fire_2009_365_conus.dbf\ncaution: filename not matched:  modis_fire_2010_365_conus.dbf\ncaution: filename not matched:  modis_fire_2011_365_conus.dbf\ncaution: filename not matched:  modis_fire_2012_366_conus.dbf\ncaution: filename not matched:  modis_fire_2013_365_conus.dbf\ncaution: filename not matched:  modis_fire_2014_365_conus.dbf\ncaution: filename not matched:  modis_fire_2015_365_conus.dbf\nArchive:  mcd14ml_2001_005_01_conus_shp.zip\nreplace mcd14ml_2001_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2002_005_01_conus_shp.zip\nreplace mcd14ml_2002_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2003_005_01_conus_shp.zip\nreplace mcd14ml_2003_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2004_005_01_conus_shp.zip\nreplace mcd14ml_2004_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2005_005_01_conus_shp.zip\nreplace mcd14ml_2005_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2006_005_01_conus_shp.zip\nreplace mcd14ml_2006_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2007_005_01_conus_shp.zip\nreplace mcd14ml_2007_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2008_005_01_conus.dbf\nArchive:  mcd14ml_2008_005_01_conus_shp.zip\nreplace mcd14ml_2008_005_01_conus.dbf? [y]es, [n]o, [A]ll, [N]one, [r]ename:  NULL\n(EOF or read error, treating as \"[N]one\" ...)\ncaution: filename not matched:  mcd14ml_2001_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2002_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2003_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2004_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2005_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2006_005_01_conus.dbf\ncaution: filename not matched:  mcd14ml_2007_005_01_conus.dbf\n"},{"type":"TEXT","data":"ExitValue: 123"}]},"apps":[],"jobName":"paragraph_1508875968857_1867429893","id":"20171024-201248_1170429857","dateCreated":"2017-10-24T20:12:48+0000","dateStarted":"2017-10-25T22:10:33+0000","dateFinished":"2017-10-25T22:11:10+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:7993"},{"title":"Convert shapefiles to CSVs","text":"%python\nimport csv\nfrom dbfpy import dbf\nimport os\nimport sys\nDATADIR='/mapr/my.cluster.com/user/mapr/data/fires/'\n\nfor filename in os.listdir(DATADIR):\n\n    if filename.endswith('.dbf'):\n        print \"Converting %s to csv\" % filename\n        csv_fn = DATADIR+filename[:-4]+ \".csv\"\n        with open(csv_fn,'wb') as csvfile:\n            in_db = dbf.Dbf(DATADIR+filename)\n            out_csv = csv.writer(csvfile)\n            names = []\n            for field in in_db.header.fields:\n                names.append(field.name)\n            out_csv.writerow(names)\n            for rec in in_db:\n                out_csv.writerow(rec.fieldData)\n            in_db.close()\n            print \"Done...\"\n\n","user":"anonymous","dateUpdated":"2017-10-25T15:23:15+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false},"editorMode":"ace/mode/python","title":true,"tableHide":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Converting mcd14ml_2002_005_01_conus.dbf to csv\nDone...\nConverting modis_fire_2009_365_conus.dbf to csv\nDone...\nConverting modis_fire_2013_365_conus.dbf to csv\nDone...\nConverting mcd14ml_2005_005_01_conus.dbf to csv\nDone...\nConverting modis_fire_2016_365_conus.dbf to csv\nDone...\nConverting modis_fire_2015_365_conus.dbf to csv\nDone...\nConverting mcd14ml_2004_005_01_conus.dbf to csv\nDone...\nConverting modis_fire_2011_365_conus.dbf to csv\nDone...\nConverting mcd14ml_2001_005_01_conus.dbf to csv\nDone...\nConverting modis_fire_2012_366_conus.dbf to csv\nDone...\nConverting mcd14ml_2003_005_01_conus.dbf to csv\nDone...\nConverting modis_fire_2014_365_conus.dbf to csv\nDone...\nConverting mcd14ml_2007_005_01_conus.dbf to csv\nDone...\nConverting mcd14ml_2008_005_01_conus.dbf to csv\nDone...\nConverting mcd14ml_2006_005_01_conus.dbf to csv\nDone...\nConverting modis_fire_2010_365_conus.dbf to csv\nDone...\n"}]},"apps":[],"jobName":"paragraph_1508876509276_-96747179","id":"20171024-202149_2037979424","dateCreated":"2017-10-24T20:21:49+0000","dateStarted":"2017-10-25T15:23:15+0000","dateFinished":"2017-10-25T15:27:01+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7994"},{"title":"Import Spark ML Libraries","text":"import org.apache.spark._\nimport org.apache.spark.rdd.RDD\nimport org.apache.spark.sql.types._\nimport org.apache.spark.sql.functions._\nimport org.apache.spark.sql._\nimport org.apache.spark._\nimport org.apache.spark.ml.feature.StringIndexer\nimport org.apache.spark.ml.feature.VectorAssembler\nimport org.apache.spark.ml.clustering.KMeans\nimport org.apache.spark.ml.clustering.KMeansModel\nimport org.apache.spark.mllib.linalg.Vectors","user":"anonymous","dateUpdated":"2017-10-26T03:30:46+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"editorSetting":{"language":"scala"},"tableHide":true,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nimport org.apache.spark._\n\nimport org.apache.spark.rdd.RDD\n\nimport org.apache.spark.sql.types._\n\nimport org.apache.spark.sql.functions._\n\nimport org.apache.spark.sql._\n\nimport org.apache.spark._\n\nimport org.apache.spark.ml.feature.StringIndexer\n\nimport org.apache.spark.ml.feature.VectorAssembler\n\nimport org.apache.spark.ml.clustering.KMeans\n\nimport org.apache.spark.ml.clustering.KMeansModel\n\nimport org.apache.spark.mllib.linalg.Vectors\n"}]},"apps":[],"jobName":"paragraph_1508821773190_2078330813","id":"20161030-025214_1655763979","dateCreated":"2017-10-24T05:09:33+0000","dateStarted":"2017-10-26T03:30:46+0000","dateFinished":"2017-10-26T03:31:25+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7995"},{"title":"Define schema for datasets since 2009","text":"import sqlContext.implicits._\nimport sqlContext._\nval modis_schema = StructType(Array(\n  StructField(\"area\", DoubleType, true),\n  StructField(\"perimeter\", DoubleType, true),\n  StructField(\"firenum\", IntegerType, true),      \n  StructField(\"fire_id\", IntegerType, true),      \n  StructField(\"latitude\", DoubleType, true),\n  StructField(\"longitude\", DoubleType, true),\n  StructField(\"date\", TimestampType, true),\n  StructField(\"julian\", IntegerType, true),\n  StructField(\"gmt\", IntegerType, true),\n  StructField(\"temp\", DoubleType, true),     \n  StructField(\"spix\", DoubleType, true),      \n  StructField(\"tpix\", DoubleType, true),            \n  StructField(\"src\", StringType, true),\n  StructField(\"sat_src\", StringType, true),      \n  StructField(\"conf\", IntegerType, true),\n  StructField(\"frp\", DoubleType, true)\n))","user":"anonymous","dateUpdated":"2017-10-26T04:42:05+0000","config":{"colWidth":12,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","tableHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nimport sqlContext.implicits._\n\nimport sqlContext._\n\nmodis_schema: org.apache.spark.sql.types.StructType = StructType(StructField(area,DoubleType,true), StructField(perimeter,DoubleType,true), StructField(firenum,IntegerType,true), StructField(fire_id,IntegerType,true), StructField(latitude,DoubleType,true), StructField(longitude,DoubleType,true), StructField(date,TimestampType,true), StructField(julian,IntegerType,true), StructField(gmt,IntegerType,true), StructField(temp,DoubleType,true), StructField(spix,DoubleType,true), StructField(tpix,DoubleType,true), StructField(src,StringType,true), StructField(sat_src,StringType,true), StructField(conf,IntegerType,true), StructField(frp,DoubleType,true))\n"}]},"apps":[],"jobName":"paragraph_1508821773191_2077946064","id":"20161030-030543_519944270","dateCreated":"2017-10-24T05:09:33+0000","dateStarted":"2017-10-26T04:42:05+0000","dateFinished":"2017-10-26T04:42:10+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7996"},{"title":"Define schema for datasets before 2009","text":"import sqlContext.implicits._\nimport sqlContext._\nval mcd14ml_schema = StructType(Array(\n  StructField(\"area\", DoubleType, true),\n  StructField(\"perimeter\", DoubleType, true),\n  StructField(\"mcd14ml_\", IntegerType, true),      \n  StructField(\"latitude\", DoubleType, true),      \n  StructField(\"longitude\", DoubleType, true),\n  StructField(\"t21\", DoubleType, true),\n  StructField(\"t31\", DoubleType, true),\n  StructField(\"spix\", DoubleType, true),\n  StructField(\"tpix\", DoubleType, true),\n  StructField(\"date\", TimestampType, true),     \n  StructField(\"jdate\", IntegerType, true),      \n  StructField(\"utc\", IntegerType, true),            \n  StructField(\"satellite\", StringType, true),\n  StructField(\"frp\", DoubleType, true),      \n  StructField(\"confidence\", IntegerType, true)\n))","user":"anonymous","dateUpdated":"2017-10-26T04:42:09+0000","config":{"colWidth":12,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","tableHide":true,"title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nimport sqlContext.implicits._\n\nimport sqlContext._\n\nmcd14ml_schema: org.apache.spark.sql.types.StructType = StructType(StructField(area,DoubleType,true), StructField(perimeter,DoubleType,true), StructField(mcd14ml_,IntegerType,true), StructField(latitude,DoubleType,true), StructField(longitude,DoubleType,true), StructField(t21,DoubleType,true), StructField(t31,DoubleType,true), StructField(spix,DoubleType,true), StructField(tpix,DoubleType,true), StructField(date,TimestampType,true), StructField(jdate,IntegerType,true), StructField(utc,IntegerType,true), StructField(satellite,StringType,true), StructField(frp,DoubleType,true), StructField(confidence,IntegerType,true))\n"}]},"apps":[],"jobName":"paragraph_1508987801157_642409146","id":"20171026-031641_291214581","dateCreated":"2017-10-26T03:16:41+0000","dateStarted":"2017-10-26T04:42:09+0000","dateFinished":"2017-10-26T04:42:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7997"},{"title":"Load Raw Data","text":"// Load datasets containing years 2009-2016\nval df_modis_all = sqlContext.read.format(\"com.databricks.spark.csv\").option(\"header\", \"true\").schema(modis_schema).load(\"/user/mapr/data/fires/modis*.csv\")\n// Include only fires with coordinates in Cascadia\nval df_modis = df_modis_all.filter($\"latitude\" > 42).filter($\"latitude\" < 50).filter($\"longitude\" > -124).filter($\"longitude\" < -110)\n// Load datasets containing years 2000-2008\nval df_mcd14ml_all = sqlContext.read.format(\"com.databricks.spark.csv\").option(\"header\", \"true\").schema(modis_schema).load(\"/user/mapr/data/fires/mcd14ml*.csv\")\n// Include only fires with coordinates in Cascadia\nval df_mcd14ml = df_mcd14ml_all.filter($\"latitude\" > 42).filter($\"latitude\" < 50).filter($\"longitude\" > -124).filter($\"longitude\" < -110)\n// Join both datasets\nval df = df_modis.union(df_mcd14ml).select($\"latitude\", $\"longitude\")","user":"anonymous","dateUpdated":"2017-10-26T04:50:49+0000","config":{"colWidth":12,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\ndf_modis_all: org.apache.spark.sql.DataFrame = [area: double, perimeter: double ... 14 more fields]\n\ndf_modis: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [area: double, perimeter: double ... 14 more fields]\n\ndf_mcd14ml_all: org.apache.spark.sql.DataFrame = [area: double, perimeter: double ... 14 more fields]\n\ndf_mcd14ml: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [area: double, perimeter: double ... 14 more fields]\n\ndf: org.apache.spark.sql.DataFrame = [latitude: double, longitude: double]\n"}]},"apps":[],"jobName":"paragraph_1508821773191_2077946064","id":"20161030-030618_394385178","dateCreated":"2017-10-24T05:09:33+0000","dateStarted":"2017-10-26T04:50:49+0000","dateFinished":"2017-10-26T04:50:52+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7998"},{"title":"What does this data look like, anyway?","text":"df_modis.show(10)","user":"anonymous","dateUpdated":"2017-10-26T04:52:04+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+----+---------+-------+-------+--------+---------+--------------------+------+----+-----+----+----+----+-------+----+-----+\n|area|perimeter|firenum|fire_id|latitude|longitude|                date|julian| gmt| temp|spix|tpix| src|sat_src|conf|  frp|\n+----+---------+-------+-------+--------+---------+--------------------+------+----+-----+----+----+----+-------+----+-----+\n| 0.0|      0.0|      1| 760349|  49.455| -120.222|2012-12-02 00:00:...|   337|1938|327.4| 1.8| 1.3|ssec|      T|  80|104.9|\n| 0.0|      0.0|      2| 760350|  49.455| -120.222|2012-12-02 00:00:...|   337|1940|327.7| 1.8| 1.3|gsfc|      T|  81|105.8|\n| 0.0|      0.0|     10| 751851|  49.447| -118.341|2012-11-08 00:00:...|   313|1849|341.3| 1.1| 1.0|ssec|      T|  91| 69.6|\n| 0.0|      0.0|     11| 751852|  49.447| -118.341|2012-11-08 00:00:...|   313|1849|341.3| 1.1| 1.0|rsac|      T|  91| 69.6|\n| 0.0|      0.0|     12| 751853|  49.447| -118.341|2012-11-08 00:00:...|   313|1850|341.0| 1.0| 1.0|gsfc|      T|  90| 68.8|\n| 0.0|      0.0|     18| 368270|  49.442| -118.334|2012-11-08 00:00:...|   313|2030|315.6| 1.1| 1.0|rsac|      A|   0| 30.1|\n| 0.0|      0.0|     19| 368272|  49.442| -118.334|2012-11-08 00:00:...|   313|2035|315.6| 1.1| 1.0|gsfc|      A|   0| 30.5|\n| 0.0|      0.0|     20| 368271|  49.442| -118.334|2012-11-08 00:00:...|   313|2032|315.6| 1.1| 1.0|ssec|      A|   0| 30.1|\n| 0.0|      0.0|     24| 751847|  49.438| -118.343|2012-11-08 00:00:...|   313|1849|310.1| 1.1| 1.0|ssec|      T|  29| 24.1|\n| 0.0|      0.0|     25| 751846|  49.438| -118.343|2012-11-08 00:00:...|   313|1849|310.1| 1.1| 1.0|rsac|      T|  29| 24.1|\n+----+---------+-------+-------+--------+---------+--------------------+------+----+-----+----+----+----+-------+----+-----+\nonly showing top 10 rows\n\n"}]},"apps":[],"jobName":"paragraph_1508993481697_820542127","id":"20171026-045121_278676373","dateCreated":"2017-10-26T04:51:21+0000","dateStarted":"2017-10-26T04:51:31+0000","dateFinished":"2017-10-26T04:51:53+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7999"},{"title":"Train the KMeans model","text":"val featureCols = Array(\"latitude\", \"longitude\")\nval assembler = new VectorAssembler().setInputCols(featureCols).setOutputCol(\"features\")\nval df2 = assembler.transform(df)\nval Array(trainingData, testData) = df2.randomSplit(Array(0.7, 0.3), 5043)\n\nval kmeans = new KMeans().setK(100).setFeaturesCol(\"features\").setMaxIter(4)\nval model = kmeans.fit(trainingData)\nprintln(\"Final Centers: \")\nmodel.clusterCenters.foreach(println)","user":"anonymous","dateUpdated":"2017-10-26T04:50:53+0000","config":{"colWidth":12,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nfeatureCols: Array[String] = Array(latitude, longitude)\n\nassembler: org.apache.spark.ml.feature.VectorAssembler = vecAssembler_bab35ad570ea\n\ndf2: org.apache.spark.sql.DataFrame = [latitude: double, longitude: double ... 1 more field]\n\n\ntrainingData: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [latitude: double, longitude: double ... 1 more field]\ntestData: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [latitude: double, longitude: double ... 1 more field]\n\nkmeans: org.apache.spark.ml.clustering.KMeans = kmeans_232fdca5b6b1\n\nmodel: org.apache.spark.ml.clustering.KMeansModel = kmeans_232fdca5b6b1\nFinal Centers: \n[42.680210355177884,-111.59725937968977]\n[43.46119708737863,-123.4865427184466]\n[42.442929411764744,-117.53071372549019]\n[46.0875555350554,-117.83899317343179]\n[45.41602265641227,-114.0714599875284]\n[47.55513630540607,-113.53880297207272]\n[48.053261769911444,-120.0575677876107]\n[44.56749924698794,-120.14084864457843]\n[44.82837657623227,-115.5686400458541]\n[47.19294624505929,-116.3193355731225]\n[46.0001227998363,-121.42910908718788]\n[44.8225060851927,-121.18407758620698]\n[48.33468846079004,-118.85384316014812]\n[42.190387077294645,-120.67088979468606]\n[44.02496713615028,-110.15051525821596]\n[48.84425513196482,-122.80656598240468]\n[42.31075105485234,-122.05234358047026]\n[47.551169991326965,-110.58471465741545]\n[48.366605830765494,-119.25822801611778]\n[48.64446906398731,-117.12346694870438]\n[43.585575029080985,-114.48100155098888]\n[44.658283501161904,-121.77650561580175]\n[44.2141452775774,-118.80088211968264]\n[44.55109049773757,-111.99945135746607]\n[44.18748645226641,-115.5765583692076]\n[46.32117078916372,-123.24499646643106]\n[42.52315782286375,-123.75475790089729]\n[47.83102030838668,-113.02192553591584]\n[47.88128612303293,-115.86531330472098]\n[47.12880022363031,-120.65368169958985]\n[49.058754511120405,-116.16455518254297]\n[46.380826304691595,-113.73693647865049]\n[42.44345835543764,-115.48029708222808]\n[48.59209729418539,-120.00220245634236]\n[45.832998529411775,-119.65369852941178]\n[42.80554616087751,-118.89474588665446]\n[45.599176134333675,-116.27001750625217]\n[48.933861839804116,-118.36850682056688]\n[49.048490677134495,-114.68882433758593]\n[46.53233677991136,-120.07666395864108]\n[46.81406035665295,-111.96022908093278]\n[47.1773843137255,-117.76145490196078]\n[43.81896350364965,-111.10441423357665]\n[43.16925459375698,-122.42875027673234]\n[44.98837316293926,-117.31802939297128]\n[45.092147323173165,-116.45970379054316]\n[43.94497546728972,-117.09796144859811]\n[47.73799279279282,-111.90307207207206]\n[46.80794588449294,-115.59445702592082]\n[43.30027756410261,-114.9767320512819]\n[46.09602029064988,-115.33729366602705]\n[48.499308211473554,-113.3735359955005]\n[44.98750756756764,-118.83719081081081]\n[44.40895686591275,-114.98714361874055]\n[47.24852644492911,-116.94616739367501]\n[45.91029123173278,-111.63577557411271]\n[48.003583602584705,-118.1010024232631]\n[47.21107859888938,-112.88779026057243]\n[45.47023435063486,-115.44834172421476]\n[43.238007769145376,-116.86420588235295]\n[46.941102733270526,-114.56711545711585]\n[46.65701529902643,-117.49917941585535]\n[45.94805246913578,-114.46334876543213]\n[48.68818710324091,-119.61178349482135]\n[48.989644295302,-120.55701135776974]\n[46.945085929108494,-119.16613748657356]\n[44.985136440391756,-110.62700236406614]\n[43.04288829787237,-120.98841445035451]\n[44.484553467271546,-122.90281594296823]\n[48.713811594202916,-110.6999927536232]\n[44.41465921945706,-117.99498783936656]\n[47.60024606580833,-120.80637696709574]\n[43.30823627998692,-118.22460795267843]\n[45.525432050701745,-114.76495699411534]\n[45.06997001303781,-123.51793546284232]\n[46.03363036649214,-118.63290209424083]\n[42.411339405560874,-113.01552540747844]\n[47.353657579062165,-122.92253217011991]\n[42.53206368330465,-122.91702237521517]\n[46.33238826102806,-116.22532664965372]\n[48.13757210578842,-120.63054391217578]\n[43.42515586116568,-112.30286116568435]\n[47.41553032015065,-120.28863050847455]\n[43.98151189785259,-116.05173766686019]\n[44.031103838245336,-119.47318060315274]\n[47.7202422171602,-114.89755618830677]\n[43.36918918918921,-110.43353443766351]\n[42.23112643678158,-112.30654844006571]\n[48.53467159450896,-115.09414625131996]\n[42.19413026052105,-118.14942525050081]\n[45.980087702573876,-116.88747473784561]\n[46.2978552056652,-114.7551792978756]\n[43.361500727096455,-115.6408245273873]\n[42.509375226586116,-110.5823160120845]\n[44.030212504652035,-121.63664123557874]\n[45.64626304464767,-120.59849650349648]\n[43.691489661882756,-115.3556038676723]\n[44.70506696208765,-114.67740915805025]\n[48.59285780346821,-114.0871531791909]\n[42.57220040180812,-114.04146408839789]\n"}]},"apps":[],"jobName":"paragraph_1508821773192_2076022320","id":"20161030-041240_922666463","dateCreated":"2017-10-24T05:09:33+0000","dateStarted":"2017-10-26T04:50:53+0000","dateFinished":"2017-10-26T04:51:52+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8000"},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1508994493525_-539308795","id":"20171026-050813_105776262","dateCreated":"2017-10-26T05:08:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:9549","text":"val test_coordinate = Seq((42.3,-112.2 )).toDF(\"latitude\", \"longitude\")\nval df3 = assembler.transform(test_coordinate)\nval categories = model.transform(df3)\nval centroid_id = categories.select(\"prediction\").rdd.map(r => r(0)).collect()(0).asInstanceOf[Int]\nprintln(model.clusterCenters(centroid_id))","dateUpdated":"2017-10-26T05:32:07+0000","dateFinished":"2017-10-26T05:32:10+0000","dateStarted":"2017-10-26T05:32:07+0000","title":"Lookup the centroid for a random location.","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\ntest_coordinate: org.apache.spark.sql.DataFrame = [latitude: double, longitude: double]\n\ndf3: org.apache.spark.sql.DataFrame = [latitude: double, longitude: double ... 1 more field]\n\ncategories: org.apache.spark.sql.DataFrame = [latitude: double, longitude: double ... 2 more fields]\n\ncentroid_id: Int = 87\n[42.23112643678158,-112.30654844006571]\n"}]}},{"title":"Save the Model","text":"model.write.overwrite().save(\"/user/mapr/data/save_fire_model\")","user":"anonymous","dateUpdated":"2017-10-26T04:52:19+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1508825252627_49727175","id":"20171024-060732_541192335","dateCreated":"2017-10-24T06:07:32+0000","dateStarted":"2017-10-26T04:52:19+0000","dateFinished":"2017-10-26T04:52:20+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8001"},{"title":"Setup Map (save centroids)","text":"z.angularBind(\"centroid\", model.clusterCenters)","user":"anonymous","dateUpdated":"2017-10-26T05:06:11+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true,"tableHide":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1508821773196_2074483324","id":"20161116-075433_1562509402","dateCreated":"2017-10-24T05:09:33+0000","dateStarted":"2017-10-26T05:06:11+0000","dateFinished":"2017-10-26T05:06:11+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8002"},{"title":"Setup Map (initialize angular)","text":"%angular\n<!-- Avoid constantly editing JS and list the Angular vars you want exposed in an HTML attribute: -->\n<div id=\"dummy\" vars=\"centroid\"></div>\n<script type=\"text/javascript\">\n  //Given an element in the note & list of values to fetch from Spark\n  //window.angularVars.myVal will be current value of backend Spark val of same name\n  function hoist(element){\n    var varNames = element.attr('vars').split(',');\n    window.angularVars = {};\n    var scope = angular.element(element.parent('.ng-scope')).scope().compiledScope;\n    $.each(varNames, function(i, v){\n      window[v+'-watcher'] = scope.$watch(v, function(newVal, oldVal){\n        window.angularVars[v] = newVal;\n      });\n    });\n  }\n  hoist($('#dummy'));\n</script>","user":"anonymous","dateUpdated":"2017-10-26T05:06:09+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/undefined","editorHide":true,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<!-- Avoid constantly editing JS and list the Angular vars you want exposed in an HTML attribute: -->\n<div id=\"dummy\" vars=\"centroid\"></div>\n<script type=\"text/javascript\">\n  //Given an element in the note & list of values to fetch from Spark\n  //window.angularVars.myVal will be current value of backend Spark val of same name\n  function hoist(element){\n    var varNames = element.attr('vars').split(',');\n    window.angularVars = {};\n    var scope = angular.element(element.parent('.ng-scope')).scope().compiledScope;\n    $.each(varNames, function(i, v){\n      window[v+'-watcher'] = scope.$watch(v, function(newVal, oldVal){\n        window.angularVars[v] = newVal;\n      });\n    });\n  }\n  hoist($('#dummy'));\n</script>"}]},"apps":[],"jobName":"paragraph_1508824635310_-1793725754","id":"20171024-055715_1739605740","dateCreated":"2017-10-24T05:57:15+0000","dateStarted":"2017-10-26T05:06:09+0000","dateFinished":"2017-10-26T05:06:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8003"},{"title":"Where would you stage firefighting equipment?","text":"%angular\n<div id=\"map\" style=\"height:500px;width:100%;\"></div>\n<script type=\"text/javascript\">\nfunction circle(pos, color, map){\n    var circle = new google.maps.Circle({\n        strokeColor: color,\n        strokeOpacity: 0.8,\n        strokeWeight: 1,\n        fillColor: color,\n        fillOpacity: 0.3,\n        map: map,\n        center: pos,\n        radius: 40000   //default: 6.5\n    });\n}\n\n\nfunction initMap() {\n    var centroid = window.angularVars.centroid;\n    var POIs = {};\n    var USA = {lat: 39.8282, lng: -98.5795};\n    var Cascadia =  {lat: 45.5, lng: -115};\n    var map = new google.maps.Map(document.getElementById('map'), {zoom: 6, center: Cascadia });\n    //  Draw circles for each Centroid\n    $.each(centroid, function(i, v){\n         POIs[v.values[0]] = v.values;\n         var pos = {lat: parseFloat(v.values[0]), lng: parseFloat(v.values[1]) };\n         var color = '#FF0000'\n         circle(pos, color, map);\n    });\n}\n\n//Only load GMaps once\nif (typeof google === 'object' && typeof google.maps === 'object') initMap();\nelse {\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    //Replace with your API key\n    var apiKey = 'AIzaSyCvFVSdCznu_b-pgSAFN9gqVGiFXngAvzk';\n    script.src = \"https://maps.googleapis.com/maps/api/js?key=\"+apiKey+\"&callback=initMap\";\n    document.body.appendChild(script);\n}\n</script>","user":"anonymous","dateUpdated":"2017-10-26T05:06:13+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/undefined","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<div id=\"map\" style=\"height:500px;width:100%;\"></div>\n<script type=\"text/javascript\">\nfunction circle(pos, color, map){\n    var circle = new google.maps.Circle({\n        strokeColor: color,\n        strokeOpacity: 0.8,\n        strokeWeight: 1,\n        fillColor: color,\n        fillOpacity: 0.3,\n        map: map,\n        center: pos,\n        radius: 40000   //default: 6.5\n    });\n}\n\n\nfunction initMap() {\n    var centroid = window.angularVars.centroid;\n    var POIs = {};\n    var USA = {lat: 39.8282, lng: -98.5795};\n    var Cascadia =  {lat: 45.5, lng: -115};\n    var map = new google.maps.Map(document.getElementById('map'), {zoom: 6, center: Cascadia });\n    //  Draw circles for each Centroid\n    $.each(centroid, function(i, v){\n         POIs[v.values[0]] = v.values;\n         var pos = {lat: parseFloat(v.values[0]), lng: parseFloat(v.values[1]) };\n         var color = '#FF0000'\n         circle(pos, color, map);\n    });\n}\n\n//Only load GMaps once\nif (typeof google === 'object' && typeof google.maps === 'object') initMap();\nelse {\n    var script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    //Replace with your API key\n    var apiKey = 'AIzaSyCvFVSdCznu_b-pgSAFN9gqVGiFXngAvzk';\n    script.src = \"https://maps.googleapis.com/maps/api/js?key=\"+apiKey+\"&callback=initMap\";\n    document.body.appendChild(script);\n}\n</script>"}]},"apps":[],"jobName":"paragraph_1508824643439_-724877985","id":"20171024-055723_1332952506","dateCreated":"2017-10-24T05:57:23+0000","dateStarted":"2017-10-26T05:06:13+0000","dateFinished":"2017-10-26T05:06:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8004"},{"text":"\n","user":"anonymous","dateUpdated":"2017-10-26T05:05:44+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":true},"editorMode":"ace/mode/scala","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1508825011003_1676877891","id":"20171024-060331_621482076","dateCreated":"2017-10-24T06:03:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:8005"}],"name":"Forest Fire Prediction.bak","id":"2CVSXJJB3","angularObjects":{"2CXZ1QT8R:shared_process":[],"2CUH8BXP5:shared_process":[],"2CUZXQWF1:shared_process":[],"2CWU25SS9:shared_process":[],"2CXUFZC4T:shared_process":[],"2CVYJFM5K:shared_process":[],"2CWKSUH98:shared_process":[],"2CXCVRGUS:shared_process":[],"2CUBRK9E4:shared_process":[],"2CY25R41V:shared_process":[],"2CXQJBSD8:shared_process":[],"2CX4FDY4Y:shared_process":[],"2CVMHG4NV:shared_process":[],"2CUH7FA27:shared_process":[],"2CV9PPACB:shared_process":[],"2CV629DUQ:shared_process":[],"2CXJN9J7P:shared_process":[],"2CVCM9YPF:shared_process":[{"name":"centroids","object":[{"values":[42.680210355177884,-111.59725937968977]},{"values":[43.46119708737863,-123.4865427184466]},{"values":[42.442929411764744,-117.53071372549019]},{"values":[46.0875555350554,-117.83899317343179]},{"values":[45.41602265641227,-114.0714599875284]},{"values":[47.55513630540607,-113.53880297207272]},{"values":[48.053261769911444,-120.0575677876107]},{"values":[44.56749924698794,-120.14084864457843]},{"values":[44.82837657623227,-115.5686400458541]},{"values":[47.19294624505929,-116.3193355731225]},{"values":[46.0001227998363,-121.42910908718788]},{"values":[44.8225060851927,-121.18407758620698]},{"values":[48.33468846079004,-118.85384316014812]},{"values":[42.190387077294645,-120.67088979468606]},{"values":[44.02496713615028,-110.15051525821596]},{"values":[48.84425513196482,-122.80656598240468]},{"values":[42.31075105485234,-122.05234358047026]},{"values":[47.551169991326965,-110.58471465741545]},{"values":[48.366605830765494,-119.25822801611778]},{"values":[48.64446906398731,-117.12346694870438]},{"values":[43.585575029080985,-114.48100155098888]},{"values":[44.658283501161904,-121.77650561580175]},{"values":[44.2141452775774,-118.80088211968264]},{"values":[44.55109049773757,-111.99945135746607]},{"values":[44.18748645226641,-115.5765583692076]},{"values":[46.32117078916372,-123.24499646643106]},{"values":[42.52315782286375,-123.75475790089729]},{"values":[47.83102030838668,-113.02192553591584]},{"values":[47.88128612303293,-115.86531330472098]},{"values":[47.12880022363031,-120.65368169958985]},{"values":[49.058754511120405,-116.16455518254297]},{"values":[46.380826304691595,-113.73693647865049]},{"values":[42.44345835543764,-115.48029708222808]},{"values":[48.59209729418539,-120.00220245634236]},{"values":[45.832998529411775,-119.65369852941178]},{"values":[42.80554616087751,-118.89474588665446]},{"values":[45.599176134333675,-116.27001750625217]},{"values":[48.933861839804116,-118.36850682056688]},{"values":[49.048490677134495,-114.68882433758593]},{"values":[46.53233677991136,-120.07666395864108]},{"values":[46.81406035665295,-111.96022908093278]},{"values":[47.1773843137255,-117.76145490196078]},{"values":[43.81896350364965,-111.10441423357665]},{"values":[43.16925459375698,-122.42875027673234]},{"values":[44.98837316293926,-117.31802939297128]},{"values":[45.092147323173165,-116.45970379054316]},{"values":[43.94497546728972,-117.09796144859811]},{"values":[47.73799279279282,-111.90307207207206]},{"values":[46.80794588449294,-115.59445702592082]},{"values":[43.30027756410261,-114.9767320512819]},{"values":[46.09602029064988,-115.33729366602705]},{"values":[48.499308211473554,-113.3735359955005]},{"values":[44.98750756756764,-118.83719081081081]},{"values":[44.40895686591275,-114.98714361874055]},{"values":[47.24852644492911,-116.94616739367501]},{"values":[45.91029123173278,-111.63577557411271]},{"values":[48.003583602584705,-118.1010024232631]},{"values":[47.21107859888938,-112.88779026057243]},{"values":[45.47023435063486,-115.44834172421476]},{"values":[43.238007769145376,-116.86420588235295]},{"values":[46.941102733270526,-114.56711545711585]},{"values":[46.65701529902643,-117.49917941585535]},{"values":[45.94805246913578,-114.46334876543213]},{"values":[48.68818710324091,-119.61178349482135]},{"values":[48.989644295302,-120.55701135776974]},{"values":[46.945085929108494,-119.16613748657356]},{"values":[44.985136440391756,-110.62700236406614]},{"values":[43.04288829787237,-120.98841445035451]},{"values":[44.484553467271546,-122.90281594296823]},{"values":[48.713811594202916,-110.6999927536232]},{"values":[44.41465921945706,-117.99498783936656]},{"values":[47.60024606580833,-120.80637696709574]},{"values":[43.30823627998692,-118.22460795267843]},{"values":[45.525432050701745,-114.76495699411534]},{"values":[45.06997001303781,-123.51793546284232]},{"values":[46.03363036649214,-118.63290209424083]},{"values":[42.411339405560874,-113.01552540747844]},{"values":[47.353657579062165,-122.92253217011991]},{"values":[42.53206368330465,-122.91702237521517]},{"values":[46.33238826102806,-116.22532664965372]},{"values":[48.13757210578842,-120.63054391217578]},{"values":[43.42515586116568,-112.30286116568435]},{"values":[47.41553032015065,-120.28863050847455]},{"values":[43.98151189785259,-116.05173766686019]},{"values":[44.031103838245336,-119.47318060315274]},{"values":[47.7202422171602,-114.89755618830677]},{"values":[43.36918918918921,-110.43353443766351]},{"values":[42.23112643678158,-112.30654844006571]},{"values":[48.53467159450896,-115.09414625131996]},{"values":[42.19413026052105,-118.14942525050081]},{"values":[45.980087702573876,-116.88747473784561]},{"values":[46.2978552056652,-114.7551792978756]},{"values":[43.361500727096455,-115.6408245273873]},{"values":[42.509375226586116,-110.5823160120845]},{"values":[44.030212504652035,-121.63664123557874]},{"values":[45.64626304464767,-120.59849650349648]},{"values":[43.691489661882756,-115.3556038676723]},{"values":[44.70506696208765,-114.67740915805025]},{"values":[48.59285780346821,-114.0871531791909]},{"values":[42.57220040180812,-114.04146408839789]}],"noteId":"2CVSXJJB3"},{"name":"children","object":[{"values":[42.680210355177884,-111.59725937968977]},{"values":[43.46119708737863,-123.4865427184466]},{"values":[42.442929411764744,-117.53071372549019]},{"values":[46.0875555350554,-117.83899317343179]},{"values":[45.41602265641227,-114.0714599875284]},{"values":[47.55513630540607,-113.53880297207272]},{"values":[48.053261769911444,-120.0575677876107]},{"values":[44.56749924698794,-120.14084864457843]},{"values":[44.82837657623227,-115.5686400458541]},{"values":[47.19294624505929,-116.3193355731225]},{"values":[46.0001227998363,-121.42910908718788]},{"values":[44.8225060851927,-121.18407758620698]},{"values":[48.33468846079004,-118.85384316014812]},{"values":[42.190387077294645,-120.67088979468606]},{"values":[44.02496713615028,-110.15051525821596]},{"values":[48.84425513196482,-122.80656598240468]},{"values":[42.31075105485234,-122.05234358047026]},{"values":[47.551169991326965,-110.58471465741545]},{"values":[48.366605830765494,-119.25822801611778]},{"values":[48.64446906398731,-117.12346694870438]},{"values":[43.585575029080985,-114.48100155098888]},{"values":[44.658283501161904,-121.77650561580175]},{"values":[44.2141452775774,-118.80088211968264]},{"values":[44.55109049773757,-111.99945135746607]},{"values":[44.18748645226641,-115.5765583692076]},{"values":[46.32117078916372,-123.24499646643106]},{"values":[42.52315782286375,-123.75475790089729]},{"values":[47.83102030838668,-113.02192553591584]},{"values":[47.88128612303293,-115.86531330472098]},{"values":[47.12880022363031,-120.65368169958985]},{"values":[49.058754511120405,-116.16455518254297]},{"values":[46.380826304691595,-113.73693647865049]},{"values":[42.44345835543764,-115.48029708222808]},{"values":[48.59209729418539,-120.00220245634236]},{"values":[45.832998529411775,-119.65369852941178]},{"values":[42.80554616087751,-118.89474588665446]},{"values":[45.599176134333675,-116.27001750625217]},{"values":[48.933861839804116,-118.36850682056688]},{"values":[49.048490677134495,-114.68882433758593]},{"values":[46.53233677991136,-120.07666395864108]},{"values":[46.81406035665295,-111.96022908093278]},{"values":[47.1773843137255,-117.76145490196078]},{"values":[43.81896350364965,-111.10441423357665]},{"values":[43.16925459375698,-122.42875027673234]},{"values":[44.98837316293926,-117.31802939297128]},{"values":[45.092147323173165,-116.45970379054316]},{"values":[43.94497546728972,-117.09796144859811]},{"values":[47.73799279279282,-111.90307207207206]},{"values":[46.80794588449294,-115.59445702592082]},{"values":[43.30027756410261,-114.9767320512819]},{"values":[46.09602029064988,-115.33729366602705]},{"values":[48.499308211473554,-113.3735359955005]},{"values":[44.98750756756764,-118.83719081081081]},{"values":[44.40895686591275,-114.98714361874055]},{"values":[47.24852644492911,-116.94616739367501]},{"values":[45.91029123173278,-111.63577557411271]},{"values":[48.003583602584705,-118.1010024232631]},{"values":[47.21107859888938,-112.88779026057243]},{"values":[45.47023435063486,-115.44834172421476]},{"values":[43.238007769145376,-116.86420588235295]},{"values":[46.941102733270526,-114.56711545711585]},{"values":[46.65701529902643,-117.49917941585535]},{"values":[45.94805246913578,-114.46334876543213]},{"values":[48.68818710324091,-119.61178349482135]},{"values":[48.989644295302,-120.55701135776974]},{"values":[46.945085929108494,-119.16613748657356]},{"values":[44.985136440391756,-110.62700236406614]},{"values":[43.04288829787237,-120.98841445035451]},{"values":[44.484553467271546,-122.90281594296823]},{"values":[48.713811594202916,-110.6999927536232]},{"values":[44.41465921945706,-117.99498783936656]},{"values":[47.60024606580833,-120.80637696709574]},{"values":[43.30823627998692,-118.22460795267843]},{"values":[45.525432050701745,-114.76495699411534]},{"values":[45.06997001303781,-123.51793546284232]},{"values":[46.03363036649214,-118.63290209424083]},{"values":[42.411339405560874,-113.01552540747844]},{"values":[47.353657579062165,-122.92253217011991]},{"values":[42.53206368330465,-122.91702237521517]},{"values":[46.33238826102806,-116.22532664965372]},{"values":[48.13757210578842,-120.63054391217578]},{"values":[43.42515586116568,-112.30286116568435]},{"values":[47.41553032015065,-120.28863050847455]},{"values":[43.98151189785259,-116.05173766686019]},{"values":[44.031103838245336,-119.47318060315274]},{"values":[47.7202422171602,-114.89755618830677]},{"values":[43.36918918918921,-110.43353443766351]},{"values":[42.23112643678158,-112.30654844006571]},{"values":[48.53467159450896,-115.09414625131996]},{"values":[42.19413026052105,-118.14942525050081]},{"values":[45.980087702573876,-116.88747473784561]},{"values":[46.2978552056652,-114.7551792978756]},{"values":[43.361500727096455,-115.6408245273873]},{"values":[42.509375226586116,-110.5823160120845]},{"values":[44.030212504652035,-121.63664123557874]},{"values":[45.64626304464767,-120.59849650349648]},{"values":[43.691489661882756,-115.3556038676723]},{"values":[44.70506696208765,-114.67740915805025]},{"values":[48.59285780346821,-114.0871531791909]},{"values":[42.57220040180812,-114.04146408839789]}],"noteId":"2CVSXJJB3"}],"2CXS5UPP9:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}